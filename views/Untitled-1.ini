//•Als we-vanuit de browser een POST doen op de detailpagina van een persoon app-post('/detail/:id/like-or-unlike'
, function (request, response) f
// STAP 1: Haal de huidige gegevens voor deze persoon op, uit de WHOIS API
fetchJson ('https://fdnd.directus.app/items/person/'.+-request.params.id).then ((apiResponse) =>{
•//• Het custom field is-een String, dus-die moeten we-eerst omzetten (=-parsen) // • naar•een Object, zodat we-er mee kunnen werken
try {
• apiResponse.data.custom-=JSON.parse(apiResponse.data.custom)
•} catch• (e) •{
•apiResponse.data.custom =1}
｝
• // • STAP 2: Voeg de like toe-aan het custom object..
if (request.body,actie-='leuk-hoor').{
•apiResponse.data.custom.like-=-true
•｝•else｛
••apiResponse.data.custom.like =false
• }
•//•STAP•3:-Overschrijf-het-custom-field-voor deze-persoon
• fetchJon( 'https://fdnd.directus.app/items/person/'.+-request.params.id,<
• method: 'PATCH',
• body:-JSON.stringify({
... custom:-apiResponse.data.custom
•3),
• headers: {
•.. 'Content-type': 'application/json; charset=UTF-8'
•｝
}).then ( (patchResponse) •=>{
• •//•Redirect naar de persoon pagina
• response.redirect(303, '/detail/'.+-request.params.id)
})
})